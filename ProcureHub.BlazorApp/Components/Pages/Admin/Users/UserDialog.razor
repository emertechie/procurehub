@using ProcureHub.Features.Users
@inject DialogService DialogService

<RadzenStack Gap="1rem">
    <RadzenFormField Text="Email" AllowFloatingLabel="false" Variant="Variant.Text">
        <RadzenTextBox @bind-Value="@model.Email" Style="width: 100%;" />
    </RadzenFormField>

    <RadzenFormField Text="First Name" AllowFloatingLabel="false" Variant="Variant.Text">
        <RadzenTextBox @bind-Value="@model.FirstName" Style="width: 100%;" />
    </RadzenFormField>

    <RadzenFormField Text="Last Name" AllowFloatingLabel="false" Variant="Variant.Text">
        <RadzenTextBox @bind-Value="@model.LastName" Style="width: 100%;" />
    </RadzenFormField>

    @if (!IsEdit)
    {
        <RadzenFormField Text="Password" AllowFloatingLabel="false" Variant="Variant.Text">
            <RadzenPassword @bind-Value="@model.Password" Style="width: 100%;" />
        </RadzenFormField>
    }

    <RadzenStack Orientation="Orientation.Horizontal" Gap="0.5rem">
        <RadzenButton Text="Save" Click="@OnSubmit" ButtonStyle="ButtonStyle.Primary" />
        <RadzenButton Text="Cancel" Click="@Cancel" ButtonStyle="ButtonStyle.Light" />
    </RadzenStack>
</RadzenStack>

@code {
    [Parameter] public Guid? UserId { get; set; }

    private UserFormModel model = new();
    private bool IsEdit => UserId.HasValue;

    private class UserFormModel
    {
        public string Email { get; set; } = "";
        public string FirstName { get; set; } = "";
        public string LastName { get; set; } = "";
        public string Password { get; set; } = "";
    }

    private async Task OnSubmit()
    {
        // TODO: Implement create/update logic
        DialogService.Close(true);
    }

    private void Cancel()
    {
        DialogService.Close(false);
    }
}
